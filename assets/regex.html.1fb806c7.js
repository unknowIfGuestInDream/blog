import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,c,a as s,b as n,e as t,f as a,r as l}from"./app.6f239d00.js";const i={},u=a(`<h1 id="\u6B63\u5219\u7684\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#\u6B63\u5219\u7684\u6269\u5C55" aria-hidden="true">#</a> \u6B63\u5219\u7684\u6269\u5C55</h1><h2 id="regexp-\u6784\u9020\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#regexp-\u6784\u9020\u51FD\u6570" aria-hidden="true">#</a> <code>RegExp</code> \u6784\u9020\u51FD\u6570</h2><p>\u5728 ES5 \u4E2D\uFF0C<code>RegExp</code> \u6784\u9020\u51FD\u6570\u7684\u53C2\u6570\u6709\u4E24\u79CD\u60C5\u51B5\u3002</p><p>\u7B2C\u4E00\u79CD\u60C5\u51B5\u662F\uFF0C\u53C2\u6570\u662F\u5B57\u7B26\u4E32\uFF0C\u8FD9\u65F6\u7B2C\u4E8C\u4E2A\u53C2\u6570\u8868\u793A\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u4FEE\u9970\u7B26(flag)\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;xyz&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u7B49\u4EF7\u4E8E</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">xyz</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E8C\u79CD\u60C5\u51B5\u662F\uFF0C\u53C2\u6570\u662F\u4E00\u4E2A\u6B63\u5219\u8868\u793A\u5F0F\uFF0C\u8FD9\u65F6\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u539F\u6709\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u62F7\u8D1D\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">xyz</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u7B49\u4EF7\u4E8E</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">xyz</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F46\u662F\uFF0CES5 \u4E0D\u5141\u8BB8\u6B64\u65F6\u4F7F\u7528\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6DFB\u52A0\u4FEE\u9970\u7B26\uFF0C\u5426\u5219\u4F1A\u62A5\u9519\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">xyz</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Uncaught TypeError: Cannot supply flags when constructing one RegExp from another</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ES6 \u6539\u53D8\u4E86\u8FD9\u79CD\u884C\u4E3A\u3002\u5982\u679C <code>RegExp</code> \u6784\u9020\u51FD\u6570\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F\u4E00\u4E2A\u6B63\u5219\u5BF9\u8C61\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6307\u5B9A\u4FEE\u9970\u7B26\u3002\u800C\u4E14\uFF0C\u8FD4\u56DE\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u4F1A\u5FFD\u7565\u539F\u6709\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u4FEE\u9970\u7B26\uFF0C\u53EA\u4F7F\u7528\u65B0\u6307\u5B9A\u7684\u4FEE\u9970\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">abc</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flags<span class="token punctuation">;</span>
<span class="token comment">// &quot;i&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u539F\u6709\u6B63\u5219\u5BF9\u8C61\u7684\u4FEE\u9970\u7B26\u662F <code>ig</code>\uFF0C\u5B83\u4F1A\u88AB\u7B2C\u4E8C\u4E2A\u53C2\u6570 <code>i</code> \u8986\u76D6\u3002</p><h2 id="\u5B57\u7B26\u4E32\u7684\u6B63\u5219\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u5B57\u7B26\u4E32\u7684\u6B63\u5219\u65B9\u6CD5" aria-hidden="true">#</a> \u5B57\u7B26\u4E32\u7684\u6B63\u5219\u65B9\u6CD5</h2><p>\u5B57\u7B26\u4E32\u5BF9\u8C61\u5171\u6709 4 \u4E2A\u65B9\u6CD5\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F: <code>match()</code>\u3001<code>replace()</code>\u3001<code>search()</code> \u548C <code>split()</code>\u3002</p><p>ES6 \u5C06\u8FD9 4 \u4E2A\u65B9\u6CD5\uFF0C\u5728\u8BED\u8A00\u5185\u90E8\u5168\u90E8\u8C03\u7528 <code>RegExp</code> \u7684\u5B9E\u4F8B\u65B9\u6CD5\uFF0C\u4ECE\u800C\u505A\u5230\u6240\u6709\u4E0E\u6B63\u5219\u76F8\u5173\u7684\u65B9\u6CD5\uFF0C\u5168\u90FD\u5B9A\u4E49\u5728 <code>RegExp</code> \u5BF9\u8C61\u4E0A\u3002</p><ul><li><code>String.prototype.match</code> \u8C03\u7528 <code>RegExp.prototype[Symbol.match]</code></li><li><code>String.prototype.replace</code> \u8C03\u7528 <code>RegExp.prototype[Symbol.replace]</code></li><li><code>String.prototype.search</code> \u8C03\u7528 <code>RegExp.prototype[Symbol.search]</code></li><li><code>String.prototype.split</code> \u8C03\u7528 <code>RegExp.prototype[Symbol.split]</code></li></ul><h2 id="u-\u4FEE\u9970\u7B26" tabindex="-1"><a class="header-anchor" href="#u-\u4FEE\u9970\u7B26" aria-hidden="true">#</a> u \u4FEE\u9970\u7B26</h2><p>ES6 \u5BF9\u6B63\u5219\u8868\u8FBE\u5F0F\u6DFB\u52A0\u4E86 <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u542B\u4E49\u4E3A\u201CUnicode \u6A21\u5F0F\u201D\uFF0C\u7528\u6765\u6B63\u786E\u5904\u7406\u5927\u4E8E <code>\\uFFFF</code> \u7684 Unicode \u5B57\u7B26\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u4F1A\u6B63\u786E\u5904\u7406\u56DB\u4E2A\u5B57\u8282\u7684 UTF-16 \u7F16\u7801\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\uD83D</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;\\uD83D\\uDC2A&#39;</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token operator">/</span><span class="token operator">^</span>\\uD83D<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;\\uD83D\\uDC2A&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C<code>\\uD83D\\uDC2A</code> \u662F\u4E00\u4E2A\u56DB\u4E2A\u5B57\u8282\u7684 UTF-16 \u7F16\u7801\uFF0C\u4EE3\u8868\u4E00\u4E2A\u5B57\u7B26\u3002\u4F46\u662F\uFF0CES5 \u4E0D\u652F\u6301\u56DB\u4E2A\u5B57\u8282\u7684 UTF-16 \u7F16\u7801\uFF0C\u4F1A\u5C06\u5176\u8BC6\u522B\u4E3A\u4E24\u4E2A\u5B57\u7B26\uFF0C\u5BFC\u81F4\u7B2C\u4E8C\u884C\u4EE3\u7801\u7ED3\u679C\u4E3A <code>true</code>\u3002\u52A0\u4E86 <code>u</code> \u4FEE\u9970\u7B26\u4EE5\u540E\uFF0CES6 \u5C31\u4F1A\u8BC6\u522B\u5176\u4E3A\u4E00\u4E2A\u5B57\u7B26\uFF0C\u6240\u4EE5\u7B2C\u4E00\u884C\u4EE3\u7801\u7ED3\u679C\u4E3A <code>false</code>\u3002</p><p>\u4E00\u65E6\u52A0\u4E0A <code>u</code> \u4FEE\u9970\u7B26\u53F7\uFF0C\u5C31\u4F1A\u4FEE\u6539\u4E0B\u9762\u8FD9\u4E9B\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u884C\u4E3A\u3002</p><ol><li><p>\u70B9\u5B57\u7B26</p><p>\u70B9(<code>.</code>)\u5B57\u7B26\u5728\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\uFF0C\u542B\u4E49\u662F\u9664\u4E86\u6362\u884C\u7B26\u4EE5\u5916\u7684\u4EFB\u610F\u5355\u4E2A\u5B57\u7B26\u3002\u5BF9\u4E8E\u7801\u70B9\u5927\u4E8E <code>0xFFFF</code> \u7684 Unicode \u5B57\u7B26\uFF0C\u70B9\u5B57\u7B26\u4E0D\u80FD\u8BC6\u522B\uFF0C\u5FC5\u987B\u52A0\u4E0A <code>u</code> \u4FEE\u9970\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&#39;\u{20BB7}&#39;</span><span class="token punctuation">;</span>

<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">.</span>$<span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u8868\u793A\uFF0C\u5982\u679C\u4E0D\u6DFB\u52A0 <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u6B63\u5219\u8868\u8FBE\u5F0F\u5C31\u4F1A\u8BA4\u4E3A\u5B57\u7B26\u4E32\u4E3A\u4E24\u4E2A\u5B57\u7B26\uFF0C\u4ECE\u800C\u5339\u914D\u5931\u8D25\u3002</p></li><li><p>Unicode \u5B57\u7B26\u8868\u793A\u6CD5</p><p>ES6 \u65B0\u589E\u4E86\u4F7F\u7528\u5927\u62EC\u53F7\u8868\u793A Unicode \u5B57\u7B26\uFF0C\u8FD9\u79CD\u8868\u793A\u6CD5\u5728\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u5FC5\u987B\u52A0\u4E0A <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u624D\u80FD\u8BC6\u522B\u5F53\u4E2D\u7684\u5927\u62EC\u53F7\uFF0C\u5426\u5219\u4F1A\u88AB\u89E3\u8BFB\u4E3A\u91CF\u8BCD\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\u{61}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token operator">/</span>a<span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">/</span>\u{20BB7}<span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\u{20BB7}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u8868\u793A\uFF0C\u5982\u679C\u4E0D\u52A0 <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u6B63\u5219\u8868\u8FBE\u5F0F\u65E0\u6CD5\u8BC6\u522B <code>\\u{61}</code> \u8FD9\u79CD\u8868\u793A\u6CD5\uFF0C\u53EA\u4F1A\u8BA4\u4E3A\u8FD9\u5339\u914D 61 \u4E2A\u8FDE\u7EED\u7684 <code>u</code>\u3002</p></li><li><p>\u91CF\u8BCD</p><p>\u4F7F\u7528 <code>u</code> \u4FEE\u9970\u7B26\u540E\uFF0C\u6240\u6709\u91CF\u8BCD\u90FD\u4F1A\u6B63\u786E\u8BC6\u522B\u7801\u70B9\u5927\u4E8E <code>0xFFFF</code> \u7684 Unicode \u5B57\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a{2}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;aa&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token operator">/</span>a<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;aa&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token operator">/</span>\u{20BB7}<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;\u{20BB7}\u{20BB7}&#39;</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token operator">/</span>\u{20BB7}<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;\u{20BB7}\u{20BB7}&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u9884\u5B9A\u4E49\u6A21\u5F0F</p><p><code>u</code> \u4FEE\u9970\u7B26\u4E5F\u5F71\u54CD\u5230\u9884\u5B9A\u4E49\u6A21\u5F0F\uFF0C\u80FD\u5426\u6B63\u786E\u8BC6\u522B\u7801\u70B9\u5927\u4E8E <code>0xFFFF</code> \u7684 Unicode \u5B57\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\S$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;\u{20BB7}&#39;</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token operator">/</span><span class="token operator">^</span>\\<span class="token constant">S</span>$<span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;\u{20BB7}&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u7684 <code>\\S</code> \u662F\u9884\u5B9A\u4E49\u6A21\u5F0F\uFF0C\u5339\u914D\u6240\u6709\u975E\u7A7A\u767D\u5B57\u7B26\u3002\u53EA\u6709\u52A0\u4E86 <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u5B83\u624D\u80FD\u6B63\u786E\u5339\u914D\u7801\u70B9\u5927\u4E8E <code>0xFFFF</code> \u7684 Unicode \u5B57\u7B26\u3002</p><p>\u5229\u7528\u8FD9\u4E00\u70B9\uFF0C\u53EF\u4EE5\u5199\u51FA\u4E00\u4E2A\u6B63\u786E\u8FD4\u56DE\u5B57\u7B26\u4E32\u957F\u5EA6\u7684\u51FD\u6570\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">codePointLength</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\s\\S]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gu</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result <span class="token operator">?</span> result<span class="token punctuation">.</span>length <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;\u{20BB7}\u{20BB7}&quot;</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token function">codePointLength</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>i</code> \u4FEE\u9970\u7B26</p><p>\u6709\u4E9B Unicode \u5B57\u7B26\u7684\u7F16\u7801\u4E0D\u540C\uFF0C\u4F46\u662F\u5B57\u578B\u5F88\u76F8\u8FD1\uFF0C\u6BD4\u5982\uFF0C<code>\\u004B</code> \u4E0E <code>\\u212A</code> \u90FD\u662F\u5927\u5199\u7684 <code>K</code>\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\\u212A&quot;</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token comment">// false</span>
  <span class="token punctuation">[</span>a <span class="token operator">-</span> z<span class="token punctuation">]</span> <span class="token operator">/</span>
  iu<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\\u212A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u4E0D\u52A0 <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u5C31\u65E0\u6CD5\u8BC6\u522B\u975E\u89C4\u8303\u7684 <code>K</code> \u5B57\u7B26\u3002</p></li></ol><h2 id="regexp-prototype-unicode-\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#regexp-prototype-unicode-\u5C5E\u6027" aria-hidden="true">#</a> RegExp.prototype.unicode \u5C5E\u6027</h2><p>\u6B63\u5219\u5B9E\u4F8B\u5BF9\u8C61\u65B0\u589E <code>unicode</code> \u5C5E\u6027\uFF0C\u8868\u793A\u662F\u5426\u8BBE\u7F6E\u4E86 <code>u</code> \u4FEE\u9970\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> r1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">hello</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> r2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">hello</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span>

r1<span class="token punctuation">.</span>unicode<span class="token punctuation">;</span> <span class="token comment">// false</span>
r2<span class="token punctuation">.</span>unicode<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u6B63\u5219\u8868\u8FBE\u5F0F\u662F\u5426\u8BBE\u7F6E\u4E86 <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u53EF\u4EE5\u4ECE <code>unicode</code> \u5C5E\u6027\u770B\u51FA\u6765\u3002</p><h2 id="y-\u4FEE\u9970\u7B26" tabindex="-1"><a class="header-anchor" href="#y-\u4FEE\u9970\u7B26" aria-hidden="true">#</a> y \u4FEE\u9970\u7B26</h2><p>\u9664\u4E86 <code>u</code> \u4FEE\u9970\u7B26\uFF0CES6 \u8FD8\u4E3A\u6B63\u5219\u8868\u8FBE\u5F0F\u6DFB\u52A0\u4E86 <code>y</code> \u4FEE\u9970\u7B26\uFF0C\u53EB\u505A\u201C\u7C98\u8FDE\u201D(sticky)\u4FEE\u9970\u7B26\u3002</p><p><code>y</code> \u4FEE\u9970\u7B26\u7684\u4F5C\u7528\u4E0E <code>g</code> \u4FEE\u9970\u7B26\u7C7B\u4F3C\uFF0C\u4E5F\u662F\u5168\u5C40\u5339\u914D\uFF0C\u540E\u4E00\u6B21\u5339\u914D\u90FD\u4ECE\u4E0A\u4E00\u6B21\u5339\u914D\u6210\u529F\u7684\u4E0B\u4E00\u4E2A\u4F4D\u7F6E\u5F00\u59CB\u3002\u4E0D\u540C\u4E4B\u5904\u5728\u4E8E\uFF0C<code>g</code> \u4FEE\u9970\u7B26\u53EA\u8981\u5269\u4F59\u4F4D\u7F6E\u4E2D\u5B58\u5728\u5339\u914D\u5C31\u53EF\uFF0C\u800C <code>y</code> \u4FEE\u9970\u7B26\u786E\u4FDD\u5339\u914D\u5FC5\u987B\u4ECE\u5269\u4F59\u7684\u7B2C\u4E00\u4E2A\u4F4D\u7F6E\u5F00\u59CB\uFF0C\u8FD9\u4E5F\u5C31\u662F\u201C\u7C98\u8FDE\u201D\u7684\u6DB5\u4E49\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;aaa_aa_a&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> r1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> r2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">;</span>

r1<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;aaa&quot;]</span>
r2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;aaa&quot;]</span>

r1<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;aa&quot;]</span>
r2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u6709\u4E24\u4E2A\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u4E00\u4E2A\u4F7F\u7528 <code>g</code> \u4FEE\u9970\u7B26\uFF0C\u53E6\u4E00\u4E2A\u4F7F\u7528 <code>y</code> \u4FEE\u9970\u7B26\u3002\u8FD9\u4E24\u4E2A\u6B63\u5219\u8868\u8FBE\u5F0F\u5404\u6267\u884C\u4E86\u4E24\u6B21\uFF0C\u7B2C\u4E00\u6B21\u6267\u884C\u7684\u65F6\u5019\uFF0C\u4E24\u8005\u884C\u4E3A\u76F8\u540C\uFF0C\u5269\u4F59\u5B57\u7B26\u4E32\u90FD\u662F <code>_aa_a</code>\u3002\u7531\u4E8E <code>g</code> \u4FEE\u9970\u6CA1\u6709\u4F4D\u7F6E\u8981\u6C42\uFF0C\u6240\u4EE5\u7B2C\u4E8C\u6B21\u6267\u884C\u4F1A\u8FD4\u56DE\u7ED3\u679C\uFF0C\u800C <code>y</code> \u4FEE\u9970\u7B26\u8981\u6C42\u5339\u914D\u5FC5\u987B\u4ECE\u5934\u90E8\u5F00\u59CB\uFF0C\u6240\u4EE5\u8FD4\u56DE <code>null</code>\u3002</p><p>\u5982\u679C\u6539\u4E00\u4E0B\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u4FDD\u8BC1\u6BCF\u6B21\u90FD\u80FD\u5934\u90E8\u5339\u914D\uFF0C<code>y</code> \u4FEE\u9970\u7B26\u5C31\u4F1A\u8FD4\u56DE\u7ED3\u679C\u4E86\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;aaa_aa_a&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a+_</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">;</span>

r<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;aaa_&quot;]</span>
r<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;aa_&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u6BCF\u6B21\u5339\u914D\uFF0C\u90FD\u662F\u4ECE\u5269\u4F59\u5B57\u7B26\u4E32\u7684\u5934\u90E8\u5F00\u59CB\u3002</p><p>\u4F7F\u7528 <code>lastIndex</code> \u5C5E\u6027\uFF0C\u53EF\u4EE5\u66F4\u597D\u5730\u8BF4\u660E <code>y</code> \u4FEE\u9970\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">REGEX</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

<span class="token comment">// \u6307\u5B9A\u4ECE2\u53F7\u4F4D\u7F6E(y)\u5F00\u59CB\u5339\u914D</span>
<span class="token constant">REGEX</span><span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// \u5339\u914D\u6210\u529F</span>
<span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token constant">REGEX</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;xaya&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u57283\u53F7\u4F4D\u7F6E\u5339\u914D\u6210\u529F</span>
match<span class="token punctuation">.</span>index<span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token comment">// \u4E0B\u4E00\u6B21\u5339\u914D\u4ECE4\u53F7\u4F4D\u5F00\u59CB</span>
<span class="token constant">REGEX</span><span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span> <span class="token comment">// 4</span>

<span class="token comment">// 4\u53F7\u4F4D\u5F00\u59CB\u5339\u914D\u5931\u8D25</span>
<span class="token constant">REGEX</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;xaya&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C<code>lastIndex</code> \u5C5E\u6027\u6307\u5B9A\u6BCF\u6B21\u641C\u7D22\u7684\u5F00\u59CB\u4F4D\u7F6E\uFF0C<code>g</code> \u4FEE\u9970\u7B26\u4ECE\u8FD9\u4E2A\u4F4D\u7F6E\u5F00\u59CB\u5411\u540E\u641C\u7D22\uFF0C\u76F4\u5230\u53D1\u73B0\u5339\u914D\u4E3A\u6B62\u3002</p><p><code>y</code> \u4FEE\u9970\u7B26\u540C\u6837\u9075\u5B88 <code>lastIndex</code> \u5C5E\u6027\uFF0C\u4F46\u662F\u8981\u6C42\u5FC5\u987B\u5728 <code>lastIndex</code> \u6307\u5B9A\u7684\u4F4D\u7F6E\u53D1\u73B0\u5339\u914D\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">REGEX</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">;</span>

<span class="token comment">// \u6307\u5B9A\u4ECE2\u53F7\u4F4D\u7F6E\u5F00\u59CB\u5339\u914D</span>
<span class="token constant">REGEX</span><span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// \u4E0D\u662F\u7C98\u8FDE\uFF0C\u5339\u914D\u5931\u8D25</span>
<span class="token constant">REGEX</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;xaya&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>

<span class="token comment">// \u6307\u5B9A\u4ECE3\u53F7\u4F4D\u7F6E\u5F00\u59CB\u5339\u914D</span>
<span class="token constant">REGEX</span><span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">// 3\u53F7\u4F4D\u7F6E\u662F\u7C98\u8FDE\uFF0C\u5339\u914D\u6210\u529F</span>
<span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token constant">REGEX</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;xaya&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
match<span class="token punctuation">.</span>index<span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token constant">REGEX</span><span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9E\u9645\u4E0A\uFF0C<code>y</code> \u4FEE\u9970\u7B26\u53F7\u9690\u542B\u4E86\u5934\u90E8\u5339\u914D\u7684\u6807\u5FD7 <code>^</code>\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;aba&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u7531\u4E8E\u4E0D\u80FD\u4FDD\u8BC1\u5934\u90E8\u5339\u914D\uFF0C\u6240\u4EE5\u8FD4\u56DE <code>null</code>\u3002<code>y</code> \u4FEE\u9970\u7B26\u7684\u8BBE\u8BA1\u672C\u610F\uFF0C\u5C31\u662F\u8BA9\u5934\u90E8\u5339\u914D\u7684\u6807\u5FD7 <code>^</code> \u5728\u5168\u5C40\u5339\u914D\u4E2D\u90FD\u6709\u6548\u3002</p><p>\u4E0B\u9762\u662F\u5B57\u7B26\u4E32\u5BF9\u8C61\u7684 <code>replace</code> \u65B9\u6CD5\u7684\u4F8B\u5B50\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">REGEX</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gy</span></span><span class="token punctuation">;</span>
<span class="token string">&quot;aaxa&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">REGEX</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#39;--xa&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u6700\u540E\u4E00\u4E2A <code>a</code> \u56E0\u4E3A\u4E0D\u662F\u51FA\u73B0\u5728\u4E0B\u4E00\u6B21\u5339\u914D\u7684\u5934\u90E8\uFF0C\u6240\u4EE5\u4E0D\u4F1A\u88AB\u66FF\u6362\u3002</p><p>\u5355\u5355\u4E00\u4E2A <code>y</code> \u4FEE\u9970\u7B26\u5BF9 <code>match</code> \u65B9\u6CD5\uFF0C\u53EA\u80FD\u8FD4\u56DE\u7B2C\u4E00\u4E2A\u5339\u914D\uFF0C\u5FC5\u987B\u4E0E <code>g</code> \u4FEE\u9970\u7B26\u8054\u7528\uFF0C\u624D\u80FD\u8FD4\u56DE\u6240\u6709\u5339\u914D\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;a1a2a3&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a\\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;a1&quot;]</span>
<span class="token string">&quot;a1a2a3&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a\\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gy</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;a1&quot;, &quot;a2&quot;, &quot;a3&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>y</code> \u4FEE\u9970\u7B26\u7684\u4E00\u4E2A\u5E94\u7528\uFF0C\u662F\u4ECE\u5B57\u7B26\u4E32\u63D0\u53D6 token(\u8BCD\u5143)\uFF0C<code>y</code> \u4FEE\u9970\u7B26\u786E\u4FDD\u4E86\u5339\u914D\u4E4B\u95F4\u4E0D\u4F1A\u6709\u6F0F\u6389\u7684\u5B57\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">TOKEN_Y</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s*(\\+|[0-9]+)\\s*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">TOKEN_G</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s*(\\+|[0-9]+)\\s*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

<span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token constant">TOKEN_Y</span><span class="token punctuation">,</span> <span class="token string">&quot;3 + 4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span>
<span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token constant">TOKEN_G</span><span class="token punctuation">,</span> <span class="token string">&quot;3 + 4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span>

<span class="token keyword">function</span> <span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">TOKEN_REGEX</span><span class="token punctuation">,</span> str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> match<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>match <span class="token operator">=</span> <span class="token constant">TOKEN_REGEX</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5982\u679C\u5B57\u7B26\u4E32\u91CC\u9762\u6CA1\u6709\u975E\u6CD5\u5B57\u7B26\uFF0C<code>y</code> \u4FEE\u9970\u7B26\u4E0E <code>g</code> \u4FEE\u9970\u7B26\u7684\u63D0\u53D6\u7ED3\u679C\u662F\u4E00\u6837\u7684\u3002\u4F46\u662F\uFF0C\u4E00\u65E6\u51FA\u73B0\u975E\u6CD5\u5B57\u7B26\uFF0C\u4E24\u8005\u7684\u884C\u4E3A\u5C31\u4E0D\u4E00\u6837\u4E86\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token constant">TOKEN_Y</span><span class="token punctuation">,</span> <span class="token string">&quot;3x + 4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ &#39;3&#39; ]</span>
<span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token constant">TOKEN_G</span><span class="token punctuation">,</span> <span class="token string">&quot;3x + 4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C<code>g</code> \u4FEE\u9970\u7B26\u4F1A\u5FFD\u7565\u975E\u6CD5\u5B57\u7B26\uFF0C\u800C <code>y</code> \u4FEE\u9970\u7B26\u4E0D\u4F1A\uFF0C\u8FD9\u6837\u5C31\u5F88\u5BB9\u6613\u53D1\u73B0\u9519\u8BEF\u3002</p><h2 id="regexp-prototype-sticky-\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#regexp-prototype-sticky-\u5C5E\u6027" aria-hidden="true">#</a> RegExp.prototype.sticky \u5C5E\u6027</h2><p>\u4E0E <code>y</code> \u4FEE\u9970\u7B26\u76F8\u5339\u914D\uFF0CES6 \u7684\u6B63\u5219\u5B9E\u4F8B\u5BF9\u8C61\u591A\u4E86 <code>sticky</code> \u5C5E\u6027\uFF0C\u8868\u793A\u662F\u5426\u8BBE\u7F6E\u4E86 <code>y</code> \u4FEE\u9970\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">hello\\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">;</span>
r<span class="token punctuation">.</span>sticky<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="regexp-prototype-flags-\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#regexp-prototype-flags-\u5C5E\u6027" aria-hidden="true">#</a> RegExp.prototype.flags \u5C5E\u6027</h2><p>ES6 \u4E3A\u6B63\u5219\u8868\u8FBE\u5F0F\u65B0\u589E\u4E86 <code>flags</code> \u5C5E\u6027\uFF0C\u4F1A\u8FD4\u56DE\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u4FEE\u9970\u7B26\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ES5 \u7684 source \u5C5E\u6027</span>
<span class="token comment">// \u8FD4\u56DE\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u6B63\u6587</span>
<span class="token operator">/</span>abc<span class="token operator">/</span>gi<span class="token punctuation">.</span>source <span class="token operator">/</span>
  <span class="token comment">// &quot;abc&quot;</span>

  <span class="token comment">// ES6 \u7684 flags \u5C5E\u6027</span>
  <span class="token comment">// \u8FD4\u56DE\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u4FEE\u9970\u7B26</span>
  abc <span class="token operator">/</span>
  ig<span class="token punctuation">.</span>flags<span class="token punctuation">;</span>
<span class="token comment">// &#39;gi&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="s-\u4FEE\u9970\u7B26-dotall-\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#s-\u4FEE\u9970\u7B26-dotall-\u6A21\u5F0F" aria-hidden="true">#</a> s \u4FEE\u9970\u7B26: dotAll \u6A21\u5F0F</h2><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\uFF0C\u70B9(<code>.</code>)\u662F\u4E00\u4E2A\u7279\u6B8A\u5B57\u7B26\uFF0C\u4EE3\u8868\u4EFB\u610F\u7684\u5355\u4E2A\u5B57\u7B26\uFF0C\u4F46\u662F\u6709\u4E24\u4E2A\u4F8B\u5916\u3002\u4E00\u4E2A\u662F\u56DB\u4E2A\u5B57\u8282\u7684 UTF-16 \u5B57\u7B26\uFF0C\u8FD9\u4E2A\u53EF\u4EE5\u7528 <code>u</code> \u4FEE\u9970\u7B26\u89E3\u51B3\uFF1B\u53E6\u4E00\u4E2A\u662F\u884C\u7EC8\u6B62\u7B26(line terminator character)\u3002</p><p>\u6240\u8C13\u884C\u7EC8\u6B62\u7B26\uFF0C\u5C31\u662F\u8BE5\u5B57\u7B26\u8868\u793A\u4E00\u884C\u7684\u7EC8\u7ED3\u3002\u4EE5\u4E0B\u56DB\u4E2A\u5B57\u7B26\u5C5E\u4E8E\u201D\u884C\u7EC8\u6B62\u7B26\u201C\u3002</p><ul><li>U+000A \u6362\u884C\u7B26(<code>\\n</code>)</li><li>U+000D \u56DE\u8F66\u7B26(<code>\\r</code>)</li><li>U+2028 \u884C\u5206\u9694\u7B26(line separator)</li><li>U+2029 \u6BB5\u5206\u9694\u7B26(paragraph separator)</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo.bar</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;foo\\nbar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u56E0\u4E3A <code>.</code> \u4E0D\u5339\u914D <code>\\n</code>\uFF0C\u6240\u4EE5\u6B63\u5219\u8868\u8FBE\u5F0F\u8FD4\u56DE <code>false</code>\u3002</p><p>\u4F46\u662F\uFF0C\u5F88\u591A\u65F6\u5019\u6211\u4EEC\u5E0C\u671B\u5339\u914D\u7684\u662F\u4EFB\u610F\u5355\u4E2A\u5B57\u7B26\uFF0C\u8FD9\u65F6\u6709\u4E00\u79CD\u53D8\u901A\u7684\u5199\u6CD5\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo[^]bar</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;foo\\nbar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,66),r={href:"https://github.com/tc39/proposal-regexp-dotall-flag",target:"_blank",rel:"noopener noreferrer"},d=s("code",null,"s",-1),k=s("code",null,".",-1),m=a(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo.bar</span><span class="token regex-delimiter">/</span><span class="token regex-flags">s</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;foo\\nbar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u88AB\u79F0\u4E3A <code>dotAll</code> \u6A21\u5F0F\uFF0C\u5373\u70B9(dot)\u4EE3\u8868\u4E00\u5207\u5B57\u7B26\u3002\u6240\u4EE5\uFF0C\u6B63\u5219\u8868\u8FBE\u5F0F\u8FD8\u5F15\u5165\u4E86\u4E00\u4E2A <code>dotAll</code> \u5C5E\u6027\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5E03\u5C14\u503C\uFF0C\u8868\u793A\u8BE5\u6B63\u5219\u8868\u8FBE\u5F0F\u662F\u5426\u5904\u5728 <code>dotAll</code> \u6A21\u5F0F\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo.bar</span><span class="token regex-delimiter">/</span><span class="token regex-flags">s</span></span><span class="token punctuation">;</span>
<span class="token comment">// \u53E6\u4E00\u79CD\u5199\u6CD5</span>
<span class="token comment">// const re = new RegExp(&#39;foo.bar&#39;, &#39;s&#39;);</span>

re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;foo\\nbar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
re<span class="token punctuation">.</span>dotAll<span class="token punctuation">;</span> <span class="token comment">// true</span>
re<span class="token punctuation">.</span>flags<span class="token punctuation">;</span> <span class="token comment">// &#39;s&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>/s</code> \u4FEE\u9970\u7B26\u548C\u591A\u884C\u4FEE\u9970\u7B26<code>/m</code> \u4E0D\u51B2\u7A81\uFF0C\u4E24\u8005\u4E00\u8D77\u4F7F\u7528\u7684\u60C5\u51B5\u4E0B\uFF0C<code>.</code> \u5339\u914D\u6240\u6709\u5B57\u7B26\uFF0C\u800C <code>^</code> \u548C<code>$</code>\u5339\u914D\u6BCF\u4E00\u884C\u7684\u884C\u9996\u548C\u884C\u5C3E\u3002</p><h2 id="\u540E\u884C\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#\u540E\u884C\u65AD\u8A00" aria-hidden="true">#</a> \u540E\u884C\u65AD\u8A00</h2>`,5),g={href:"https://github.com/tc39/proposal-regexp-lookbehind",target:"_blank",rel:"noopener noreferrer"},v=a(`<p>\u201D\u5148\u884C\u65AD\u8A00\u201C\u6307\u7684\u662F\uFF0C<code>x</code> \u53EA\u6709\u5728 <code>y</code> \u524D\u9762\u624D\u5339\u914D\uFF0C\u5FC5\u987B\u5199\u6210<code>/x(?=y)/</code>\u3002\u6BD4\u5982\uFF0C\u53EA\u5339\u914D\u767E\u5206\u53F7\u4E4B\u524D\u7684\u6570\u5B57\uFF0C\u8981\u5199\u6210<code>/\\d+(?=%)/</code>\u3002\u201D\u5148\u884C\u5426\u5B9A\u65AD\u8A00\u201C\u6307\u7684\u662F\uFF0C<code>x</code> \u53EA\u6709\u4E0D\u5728 <code>y</code> \u524D\u9762\u624D\u5339\u914D\uFF0C\u5FC5\u987B\u5199\u6210<code>/x(?!y)/</code>\u3002\u6BD4\u5982\uFF0C\u53EA\u5339\u914D\u4E0D\u5728\u767E\u5206\u53F7\u4E4B\u524D\u7684\u6570\u5B57\uFF0C\u8981\u5199\u6210<code>/\\d+(?!%)/</code>\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\d+(?=%)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;100% of US presidents have been male&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// [&quot;100&quot;]</span>
<span class="token operator">/</span>\\d<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">!</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;that\u2019s all 44 of them&#39;</span><span class="token punctuation">)</span>                 <span class="token comment">// [&quot;44&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4E24\u4E2A\u5B57\u7B26\u4E32\uFF0C\u5982\u679C\u4E92\u6362\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u5C31\u4E0D\u4F1A\u5F97\u5230\u76F8\u540C\u7ED3\u679C\u3002\u53E6\u5916\uFF0C\u8FD8\u53EF\u4EE5\u770B\u5230\uFF0C\u201D\u5148\u884C\u65AD\u8A00\u201C\u62EC\u53F7\u4E4B\u4E2D\u7684\u90E8\u5206(<code>(?=%)</code>)\uFF0C\u662F\u4E0D\u8BA1\u5165\u8FD4\u56DE\u7ED3\u679C\u7684\u3002</p><p>\u201C\u540E\u884C\u65AD\u8A00\u201D\u6B63\u597D\u4E0E\u201C\u5148\u884C\u65AD\u8A00\u201D\u76F8\u53CD\uFF0C<code>x</code> \u53EA\u6709\u5728 <code>y</code> \u540E\u9762\u624D\u5339\u914D\uFF0C\u5FC5\u987B\u5199\u6210<code>/(?&lt;=y)x/</code>\u3002\u6BD4\u5982\uFF0C\u53EA\u5339\u914D\u7F8E\u5143\u7B26\u53F7\u4E4B\u540E\u7684\u6570\u5B57\uFF0C\u8981\u5199\u6210<code>/(?&lt;=\\$)\\d+/</code>\u3002\u201D\u540E\u884C\u5426\u5B9A\u65AD\u8A00\u201C\u5219\u4E0E\u201D\u5148\u884C\u5426\u5B9A\u65AD\u8A00\u201C\u76F8\u53CD\uFF0C<code>x</code> \u53EA\u6709\u4E0D\u5728 <code>y</code> \u540E\u9762\u624D\u5339\u914D\uFF0C\u5FC5\u987B\u5199\u6210<code>/(?&lt;!y)x/</code>\u3002\u6BD4\u5982\uFF0C\u53EA\u5339\u914D\u4E0D\u5728\u7F8E\u5143\u7B26\u53F7\u540E\u9762\u7684\u6570\u5B57\uFF0C\u8981\u5199\u6210<code>/(?&lt;!\\$)\\d+/</code>\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=\\$)\\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;Benjamin Franklin is on the $100 bill&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// [&quot;100&quot;]</span>
<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span><span class="token operator">!</span>\\$<span class="token punctuation">)</span>\\d<span class="token operator">+</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;it\u2019s is worth about \u20AC90&#39;</span><span class="token punctuation">)</span>                <span class="token comment">// [&quot;90&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0C\u201C\u540E\u884C\u65AD\u8A00\u201D\u7684\u62EC\u53F7\u4E4B\u4E2D\u7684\u90E8\u5206(<code>(?&lt;=\\$)</code>)\uFF0C\u4E5F\u662F\u4E0D\u8BA1\u5165\u8FD4\u56DE\u7ED3\u679C\u3002</p><p>\u4E0B\u9762\u7684\u4F8B\u5B50\u662F\u4F7F\u7528\u540E\u884C\u65AD\u8A00\u8FDB\u884C\u5B57\u7B26\u4E32\u66FF\u6362\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_DOLLAR_PREFIX</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=\\$)foo</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token string">&quot;$foo %foo foo&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">RE_DOLLAR_PREFIX</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#39;$bar %foo foo&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u53EA\u6709\u5728\u7F8E\u5143\u7B26\u53F7\u540E\u9762\u7684 <code>foo</code> \u624D\u4F1A\u88AB\u66FF\u6362\u3002</p><p>\u201C\u540E\u884C\u65AD\u8A00\u201D\u7684\u5B9E\u73B0\uFF0C\u9700\u8981\u5148\u5339\u914D<code>/(?&lt;=y)x/</code>\u7684 <code>x</code>\uFF0C\u7136\u540E\u518D\u56DE\u5230\u5DE6\u8FB9\uFF0C\u5339\u914D <code>y</code> \u7684\u90E8\u5206\u3002\u8FD9\u79CD\u201C\u5148\u53F3\u540E\u5DE6\u201D\u7684\u6267\u884C\u987A\u5E8F\uFF0C\u4E0E\u6240\u6709\u5176\u4ED6\u6B63\u5219\u64CD\u4F5C\u76F8\u53CD\uFF0C\u5BFC\u81F4\u4E86\u4E00\u4E9B\u4E0D\u7B26\u5408\u9884\u671F\u7684\u884C\u4E3A\u3002</p><p>\u9996\u5148\uFF0C\u540E\u884C\u65AD\u8A00\u7684\u7EC4\u5339\u914D\uFF0C\u4E0E\u6B63\u5E38\u60C5\u51B5\u4E0B\u7ED3\u679C\u662F\u4E0D\u4E00\u6837\u7684\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=(\\d+)(\\d+))$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;1053&#39;</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;&quot;, &quot;1&quot;, &quot;053&quot;]</span>
<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">(</span>\\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">(</span>\\d<span class="token operator">+</span><span class="token punctuation">)</span>$<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;1053&#39;</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;1053&quot;, &quot;105&quot;, &quot;3&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u9700\u8981\u6355\u6349\u4E24\u4E2A\u7EC4\u5339\u914D\u3002\u6CA1\u6709\u201C\u540E\u884C\u65AD\u8A00\u201D\u65F6\uFF0C\u7B2C\u4E00\u4E2A\u62EC\u53F7\u662F\u8D2A\u5A6A\u6A21\u5F0F\uFF0C\u7B2C\u4E8C\u4E2A\u62EC\u53F7\u53EA\u80FD\u6355\u83B7\u4E00\u4E2A\u5B57\u7B26\uFF0C\u6240\u4EE5\u7ED3\u679C\u662F <code>105</code> \u548C <code>3</code>\u3002\u800C\u201C\u540E\u884C\u65AD\u8A00\u201D\u65F6\uFF0C\u7531\u4E8E\u6267\u884C\u987A\u5E8F\u662F\u4ECE\u53F3\u5230\u5DE6\uFF0C\u7B2C\u4E8C\u4E2A\u62EC\u53F7\u662F\u8D2A\u5A6A\u6A21\u5F0F\uFF0C\u7B2C\u4E00\u4E2A\u62EC\u53F7\u53EA\u80FD\u6355\u83B7\u4E00\u4E2A\u5B57\u7B26\uFF0C\u6240\u4EE5\u7ED3\u679C\u662F <code>1</code> \u548C <code>053</code>\u3002</p><p>\u5176\u6B21\uFF0C\u201C\u540E\u884C\u65AD\u8A00\u201D\u7684\u53CD\u659C\u6760\u5F15\u7528\uFF0C\u4E5F\u4E0E\u901A\u5E38\u7684\u987A\u5E8F\u76F8\u53CD\uFF0C\u5FC5\u987B\u653E\u5728\u5BF9\u5E94\u7684\u90A3\u4E2A\u62EC\u53F7\u4E4B\u524D\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=(o)d\\1)r</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;hodor&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// null</span>
<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;=</span>\\<span class="token number">1</span><span class="token function">d</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span>r<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;hodor&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// [&quot;r&quot;, &quot;o&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5982\u679C\u540E\u884C\u65AD\u8A00\u7684\u53CD\u659C\u6760\u5F15\u7528(<code>\\1</code>)\u653E\u5728\u62EC\u53F7\u7684\u540E\u9762\uFF0C\u5C31\u4E0D\u4F1A\u5F97\u5230\u5339\u914D\u7ED3\u679C\uFF0C\u5FC5\u987B\u653E\u5728\u524D\u9762\u624D\u53EF\u4EE5\u3002\u56E0\u4E3A\u540E\u884C\u65AD\u8A00\u662F\u5148\u4ECE\u5DE6\u5230\u53F3\u626B\u63CF\uFF0C\u53D1\u73B0\u5339\u914D\u4EE5\u540E\u518D\u56DE\u8FC7\u5934\uFF0C\u4ECE\u53F3\u5230\u5DE6\u5B8C\u6210\u53CD\u659C\u6760\u5F15\u7528\u3002</p><h2 id="unicode-\u5C5E\u6027\u7C7B" tabindex="-1"><a class="header-anchor" href="#unicode-\u5C5E\u6027\u7C7B" aria-hidden="true">#</a> Unicode \u5C5E\u6027\u7C7B</h2>`,17),x={href:"https://github.com/tc39/proposal-regexp-unicode-property-escapes",target:"_blank",rel:"noopener noreferrer"},b=s("code",null,"\\p{...}",-1),h=s("code",null,"\\P{...}",-1),q=a(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> regexGreekSymbol <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\p{Script=Greek}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span>
regexGreekSymbol<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\u03C0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C<code>\\p{Script=Greek}</code> \u6307\u5B9A\u5339\u914D\u4E00\u4E2A\u5E0C\u814A\u6587\u5B57\u6BCD\uFF0C\u6240\u4EE5\u5339\u914D<code>\u03C0</code>\u6210\u529F\u3002</p><p>Unicode \u5C5E\u6027\u7C7B\u8981\u6307\u5B9A\u5C5E\u6027\u540D\u548C\u5C5E\u6027\u503C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>\\p<span class="token punctuation">{</span>UnicodePropertyName<span class="token operator">=</span>UnicodePropertyValue<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5BF9\u4E8E\u67D0\u4E9B\u5C5E\u6027\uFF0C\u53EF\u4EE5\u53EA\u5199\u5C5E\u6027\u540D\uFF0C\u6216\u8005\u53EA\u5199\u5C5E\u6027\u503C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>\\p<span class="token punctuation">{</span>UnicodePropertyName<span class="token punctuation">}</span>
\\p<span class="token punctuation">{</span>UnicodePropertyValue<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>\\P{\u2026}</code> \u662F <code>\\p{\u2026}</code> \u7684\u53CD\u5411\u5339\u914D\uFF0C\u5373\u5339\u914D\u4E0D\u6EE1\u8DB3\u6761\u4EF6\u7684\u5B57\u7B26\u3002</p><p>\u6CE8\u610F\uFF0C\u8FD9\u4E24\u79CD\u7C7B\u53EA\u5BF9 Unicode \u6709\u6548\uFF0C\u6240\u4EE5\u4F7F\u7528\u7684\u65F6\u5019\u4E00\u5B9A\u8981\u52A0\u4E0A <code>u</code> \u4FEE\u9970\u7B26\u3002\u5982\u679C\u4E0D\u52A0 <code>u</code> \u4FEE\u9970\u7B26\uFF0C\u6B63\u5219\u8868\u8FBE\u5F0F\u4F7F\u7528 <code>\\p</code> \u548C <code>\\P</code> \u4F1A\u62A5\u9519\uFF0CECMAScript \u9884\u7559\u4E86\u8FD9\u4E24\u4E2A\u7C7B\u3002</p><p>\u7531\u4E8E Unicode \u7684\u5404\u79CD\u5C5E\u6027\u975E\u5E38\u591A\uFF0C\u6240\u4EE5\u8FD9\u79CD\u65B0\u7684\u7C7B\u7684\u8868\u8FBE\u80FD\u529B\u975E\u5E38\u5F3A\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\p{Decimal_Number}+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\u{1D7CF}\u{1D7D0}\u{1D7D1}\u{1D7DC}\u{1D7DD}\u{1D7DE}\u{1D7E9}\u{1D7EA}\u{1D7EB}\u{1D7EC}\u{1D7ED}\u{1D7EE}\u{1D7EF}\u{1D7FA}\u{1D7FB}\u{1D7FC}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5C5E\u6027\u7C7B\u6307\u5B9A\u5339\u914D\u6240\u6709\u5341\u8FDB\u5236\u5B57\u7B26\uFF0C\u53EF\u4EE5\u770B\u5230\u5404\u79CD\u5B57\u578B\u7684\u5341\u8FDB\u5236\u5B57\u7B26\u90FD\u4F1A\u5339\u914D\u6210\u529F\u3002</p><p><code>\\p{Number}</code> \u751A\u81F3\u80FD\u5339\u914D\u7F57\u9A6C\u6570\u5B57\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5339\u914D\u6240\u6709\u6570\u5B57</span>
<span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\p{Number}+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\xB2\xB3\xB9\xBC\xBD\xBE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\u325B\u325C\u325D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\u2160\u2161\u2162\u2163\u2164\u2165\u2166\u2167\u2168\u2169\u216A\u216B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u9762\u662F\u5176\u4ED6\u4E00\u4E9B\u4F8B\u5B50\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5339\u914D\u6240\u6709\u7A7A\u683C</span>
\\p<span class="token punctuation">{</span>White_Space<span class="token punctuation">}</span>

<span class="token comment">// \u5339\u914D\u5404\u79CD\u6587\u5B57\u7684\u6240\u6709\u5B57\u6BCD\uFF0C\u7B49\u540C\u4E8E Unicode \u7248\u7684 \\w</span>
<span class="token punctuation">[</span>\\p<span class="token punctuation">{</span>Alphabetic<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Mark<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Decimal_Number<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Connector_Punctuation<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Join_Control<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// \u5339\u914D\u5404\u79CD\u6587\u5B57\u7684\u6240\u6709\u975E\u5B57\u6BCD\u7684\u5B57\u7B26\uFF0C\u7B49\u540C\u4E8E Unicode \u7248\u7684 \\W</span>
<span class="token punctuation">[</span><span class="token operator">^</span>\\p<span class="token punctuation">{</span>Alphabetic<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Mark<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Decimal_Number<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Connector_Punctuation<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Join_Control<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// \u5339\u914D Emoji</span>
<span class="token operator">/</span>\\p<span class="token punctuation">{</span>Emoji_Modifier_Base<span class="token punctuation">}</span>\\p<span class="token punctuation">{</span>Emoji_Modifier<span class="token punctuation">}</span><span class="token operator">?</span><span class="token operator">|</span>\\p<span class="token punctuation">{</span>Emoji_Presentation<span class="token punctuation">}</span><span class="token operator">|</span>\\p<span class="token punctuation">{</span>Emoji<span class="token punctuation">}</span>\\uFE0F<span class="token operator">/</span>gu

<span class="token comment">// \u5339\u914D\u6240\u6709\u7684\u7BAD\u5934\u5B57\u7B26</span>
<span class="token keyword">const</span> regexArrows <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\p{Block=Arrows}+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span>
regexArrows<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;\u2190\u2191\u2192\u2193\u2194\u2195\u2196\u2197\u2198\u2199\u21CF\u21D0\u21D1\u21D2\u21D3\u21D4\u21D5\u21D6\u21D7\u21D8\u21D9\u21E7\u21E9&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5177\u540D\u7EC4\u5339\u914D" tabindex="-1"><a class="header-anchor" href="#\u5177\u540D\u7EC4\u5339\u914D" aria-hidden="true">#</a> \u5177\u540D\u7EC4\u5339\u914D</h2><h3 id="\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u7B80\u4ECB" aria-hidden="true">#</a> \u7B80\u4ECB</h3><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u4F7F\u7528\u5706\u62EC\u53F7\u8FDB\u884C\u7EC4\u5339\u914D\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_DATE</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\\d{4})-(\\d{2})-(\\d{2})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u6B63\u5219\u8868\u8FBE\u5F0F\u91CC\u9762\u6709\u4E09\u7EC4\u5706\u62EC\u53F7\u3002\u4F7F\u7528 <code>exec</code> \u65B9\u6CD5\uFF0C\u5C31\u53EF\u4EE5\u5C06\u8FD9\u4E09\u7EC4\u5339\u914D\u7ED3\u679C\u63D0\u53D6\u51FA\u6765\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_DATE</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\\d{4})-(\\d{2})-(\\d{2})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> matchObj <span class="token operator">=</span> <span class="token constant">RE_DATE</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;1999-12-31&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> year <span class="token operator">=</span> matchObj<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 1999</span>
<span class="token keyword">const</span> month <span class="token operator">=</span> matchObj<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>
<span class="token keyword">const</span> day <span class="token operator">=</span> matchObj<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 31</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EC4\u5339\u914D\u7684\u4E00\u4E2A\u95EE\u9898\u662F\uFF0C\u6BCF\u4E00\u7EC4\u7684\u5339\u914D\u542B\u4E49\u4E0D\u5BB9\u6613\u770B\u51FA\u6765\uFF0C\u800C\u4E14\u53EA\u80FD\u7528\u6570\u5B57\u5E8F\u53F7(\u6BD4\u5982 <code>matchObj[1]</code>)\u5F15\u7528\uFF0C\u8981\u662F\u7EC4\u7684\u987A\u5E8F\u53D8\u4E86\uFF0C\u5F15\u7528\u7684\u65F6\u5019\u5C31\u5FC5\u987B\u4FEE\u6539\u5E8F\u53F7\u3002</p>`,22),f={href:"https://github.com/tc39/proposal-regexp-named-groups",target:"_blank",rel:"noopener noreferrer"},y=a(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_DATE</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> matchObj <span class="token operator">=</span> <span class="token constant">RE_DATE</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;1999-12-31&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> year <span class="token operator">=</span> matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>year<span class="token punctuation">;</span> <span class="token comment">// 1999</span>
<span class="token keyword">const</span> month <span class="token operator">=</span> matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>month<span class="token punctuation">;</span> <span class="token comment">// 12</span>
<span class="token keyword">const</span> day <span class="token operator">=</span> matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>day<span class="token punctuation">;</span> <span class="token comment">// 31</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u201C\u5177\u540D\u7EC4\u5339\u914D\u201D\u5728\u5706\u62EC\u53F7\u5185\u90E8\uFF0C\u6A21\u5F0F\u7684\u5934\u90E8\u6DFB\u52A0\u201C\u95EE\u53F7 + \u5C16\u62EC\u53F7 + \u7EC4\u540D\u201D(<code>?&lt;year&gt;</code>)\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5728 <code>exec</code> \u65B9\u6CD5\u8FD4\u56DE\u7ED3\u679C\u7684 <code>groups</code> \u5C5E\u6027\u4E0A\u5F15\u7528\u8BE5\u7EC4\u540D\u3002\u540C\u65F6\uFF0C\u6570\u5B57\u5E8F\u53F7(<code>matchObj[1]</code>)\u4F9D\u7136\u6709\u6548\u3002</p><p>\u5177\u540D\u7EC4\u5339\u914D\u7B49\u4E8E\u4E3A\u6BCF\u4E00\u7EC4\u5339\u914D\u52A0\u4E0A\u4E86 ID\uFF0C\u4FBF\u4E8E\u63CF\u8FF0\u5339\u914D\u7684\u76EE\u7684\u3002\u5982\u679C\u7EC4\u7684\u987A\u5E8F\u53D8\u4E86\uFF0C\u4E5F\u4E0D\u7528\u6539\u53D8\u5339\u914D\u540E\u7684\u5904\u7406\u4EE3\u7801\u3002</p><p>\u5982\u679C\u5177\u540D\u7EC4\u6CA1\u6709\u5339\u914D\uFF0C\u90A3\u4E48\u5BF9\u5E94\u7684 <code>groups</code> \u5BF9\u8C61\u5C5E\u6027\u4F1A\u662F <code>undefined</code>\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_OPT_A</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?&lt;as&gt;a+)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> matchObj <span class="token operator">=</span> <span class="token constant">RE_OPT_A</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>as<span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token string">&quot;as&quot;</span> <span class="token keyword">in</span> matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u5177\u540D\u7EC4 <code>as</code> \u6CA1\u6709\u627E\u5230\u5339\u914D\uFF0C\u90A3\u4E48 <code>matchObj.groups.as</code> \u5C5E\u6027\u503C\u5C31\u662F <code>undefined</code>\uFF0C\u5E76\u4E14 <code>as</code> \u8FD9\u4E2A\u952E\u540D\u5728 <code>groups</code> \u662F\u59CB\u7EC8\u5B58\u5728\u7684\u3002</p><h3 id="\u89E3\u6784\u8D4B\u503C\u548C\u66FF\u6362" tabindex="-1"><a class="header-anchor" href="#\u89E3\u6784\u8D4B\u503C\u548C\u66FF\u6362" aria-hidden="true">#</a> \u89E3\u6784\u8D4B\u503C\u548C\u66FF\u6362</h3><p>\u6709\u4E86\u5177\u540D\u7EC4\u5339\u914D\u4EE5\u540E\uFF0C\u53EF\u4EE5\u4F7F\u7528\u89E3\u6784\u8D4B\u503C\u76F4\u63A5\u4ECE\u5339\u914D\u7ED3\u679C\u4E0A\u4E3A\u53D8\u91CF\u8D4B\u503C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">groups</span><span class="token operator">:</span> <span class="token punctuation">{</span> one<span class="token punctuation">,</span> two <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?&lt;one&gt;.*):(?&lt;two&gt;.*)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;foo:bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
one<span class="token punctuation">;</span> <span class="token comment">// foo</span>
two<span class="token punctuation">;</span> <span class="token comment">// bar</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B57\u7B26\u4E32\u66FF\u6362\u65F6\uFF0C\u4F7F\u7528<code>$&lt;\u7EC4\u540D&gt;</code> \u5F15\u7528\u5177\u540D\u7EC4\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span>

<span class="token string">&quot;2015-01-02&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token string">&quot;$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#39;02/01/2015&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C<code>replace</code> \u65B9\u6CD5\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u800C\u4E0D\u662F\u6B63\u5219\u8868\u8FBE\u5F0F\u3002</p><p><code>replace</code> \u65B9\u6CD5\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E5F\u53EF\u4EE5\u662F\u51FD\u6570\uFF0C\u8BE5\u51FD\u6570\u7684\u53C2\u6570\u5E8F\u5217\u5982\u4E0B\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;2015-01-02&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
  re<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>
    matched<span class="token punctuation">,</span> <span class="token comment">// \u6574\u4E2A\u5339\u914D\u7ED3\u679C 2015-01-02</span>
    capture1<span class="token punctuation">,</span> <span class="token comment">// \u7B2C\u4E00\u4E2A\u7EC4\u5339\u914D 2015</span>
    capture2<span class="token punctuation">,</span> <span class="token comment">// \u7B2C\u4E8C\u4E2A\u7EC4\u5339\u914D 01</span>
    capture3<span class="token punctuation">,</span> <span class="token comment">// \u7B2C\u4E09\u4E2A\u7EC4\u5339\u914D 02</span>
    position<span class="token punctuation">,</span> <span class="token comment">// \u5339\u914D\u5F00\u59CB\u7684\u4F4D\u7F6E 0</span>
    <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token comment">// \u539F\u5B57\u7B26\u4E32 2015-01-02</span>
    groups <span class="token comment">// \u5177\u540D\u7EC4\u6784\u6210\u7684\u4E00\u4E2A\u5BF9\u8C61 {year, month, day}</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> day<span class="token punctuation">,</span> month<span class="token punctuation">,</span> year <span class="token punctuation">}</span> <span class="token operator">=</span> args<span class="token punctuation">[</span>args<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5177\u540D\u7EC4\u5339\u914D\u5728\u539F\u6765\u7684\u57FA\u7840\u4E0A\uFF0C\u65B0\u589E\u4E86\u6700\u540E\u4E00\u4E2A\u51FD\u6570\u53C2\u6570: \u5177\u540D\u7EC4\u6784\u6210\u7684\u4E00\u4E2A\u5BF9\u8C61\u3002\u51FD\u6570\u5185\u90E8\u53EF\u4EE5\u76F4\u63A5\u5BF9\u8FD9\u4E2A\u5BF9\u8C61\u8FDB\u884C\u89E3\u6784\u8D4B\u503C\u3002</p><h3 id="\u5F15\u7528" tabindex="-1"><a class="header-anchor" href="#\u5F15\u7528" aria-hidden="true">#</a> \u5F15\u7528</h3><p>\u5982\u679C\u8981\u5728\u6B63\u5219\u8868\u8FBE\u5F0F\u5185\u90E8\u5F15\u7528\u67D0\u4E2A\u201C\u5177\u540D\u7EC4\u5339\u914D\u201D\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>\\k&lt;\u7EC4\u540D&gt;</code> \u7684\u5199\u6CD5\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_TWICE</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?&lt;word&gt;[a-z]+)!\\k&lt;word&gt;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;abc!abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;abc!ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6570\u5B57\u5F15\u7528(<code>\\1</code>)\u4F9D\u7136\u6709\u6548\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_TWICE</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?&lt;word&gt;[a-z]+)!\\1$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;abc!abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;abc!ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E24\u79CD\u5F15\u7528\u8BED\u6CD5\u8FD8\u53EF\u4EE5\u540C\u65F6\u4F7F\u7528\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">RE_TWICE</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?&lt;word&gt;[a-z]+)!\\k&lt;word&gt;!\\1$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;abc!abc!abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;abc!abc!ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="string-prototype-matchall" tabindex="-1"><a class="header-anchor" href="#string-prototype-matchall" aria-hidden="true">#</a> String.prototype.matchAll</h2><p>\u5982\u679C\u4E00\u4E2A\u6B63\u5219\u8868\u8FBE\u5F0F\u5728\u5B57\u7B26\u4E32\u91CC\u9762\u6709\u591A\u4E2A\u5339\u914D\uFF0C\u73B0\u5728\u4E00\u822C\u4F7F\u7528 <code>g</code> \u4FEE\u9970\u7B26\u6216 <code>y</code> \u4FEE\u9970\u7B26\uFF0C\u5728\u5FAA\u73AF\u91CC\u9762\u9010\u4E00\u53D6\u51FA\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">t(e)(st(\\d?))</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;test1test2test3&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> matches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> match<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>match <span class="token operator">=</span> regex<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  matches<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

matches<span class="token punctuation">;</span>
<span class="token comment">// [</span>
<span class="token comment">//   [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;],</span>
<span class="token comment">//   [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;],</span>
<span class="token comment">//   [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span>
<span class="token comment">// ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C<code>while</code> \u5FAA\u73AF\u53D6\u51FA\u6BCF\u4E00\u8F6E\u7684\u6B63\u5219\u5339\u914D\uFF0C\u4E00\u5171\u4E09\u8F6E\u3002</p>`,26),j={href:"https://github.com/tc39/proposal-string-matchall",target:"_blank",rel:"noopener noreferrer"},E=s("code",null,"String.prototype.matchAll",-1),_=a(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token string">&quot;test1test2test3&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// g \u4FEE\u9970\u7B26\u52A0\u4E0D\u52A0\u90FD\u53EF\u4EE5</span>
<span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">t(e)(st(\\d?))</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> string<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;]</span>
<span class="token comment">// [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;]</span>
<span class="token comment">// [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u4EE3\u7801\u4E2D\uFF0C\u7531\u4E8E <code>string.matchAll(regex)</code> \u8FD4\u56DE\u7684\u662F\u904D\u5386\u5668\uFF0C\u6240\u4EE5\u53EF\u4EE5\u7528 <code>for...of</code> \u5FAA\u73AF\u53D6\u51FA\u3002\u76F8\u5BF9\u4E8E\u8FD4\u56DE\u6570\u7EC4\uFF0C\u8FD4\u56DE\u904D\u5386\u5668\u7684\u597D\u5904\u5728\u4E8E\uFF0C\u5982\u679C\u5339\u914D\u7ED3\u679C\u662F\u4E00\u4E2A\u5F88\u5927\u7684\u6570\u7EC4\uFF0C\u90A3\u4E48\u904D\u5386\u5668\u6BD4\u8F83\u8282\u7701\u8D44\u6E90\u3002</p><p>\u904D\u5386\u5668\u8F6C\u4E3A\u6570\u7EC4\u662F\u975E\u5E38\u7B80\u5355\u7684\uFF0C\u4F7F\u7528 <code>...</code> \u8FD0\u7B97\u7B26\u548C <code>Array.from</code> \u65B9\u6CD5\u5C31\u53EF\u4EE5\u4E86\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u8F6C\u4E3A\u6570\u7EC4\u65B9\u6CD5\u4E00</span>
<span class="token punctuation">[</span><span class="token operator">...</span>string<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F6C\u4E3A\u6570\u7EC4\u65B9\u6CD5\u4E8C</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function w(R,S){const e=l("ExternalLinkIcon");return o(),c("div",null,[u,s("p",null,[n("\u8FD9\u79CD\u89E3\u51B3\u65B9\u6848\u6BD5\u7ADF\u4E0D\u592A\u7B26\u5408\u76F4\u89C9\uFF0CES2018 "),s("a",r,[n("\u5F15\u5165"),t(e)]),d,n(" \u4FEE\u9970\u7B26\uFF0C\u4F7F\u5F97 "),k,n(" \u53EF\u4EE5\u5339\u914D\u4EFB\u610F\u5355\u4E2A\u5B57\u7B26\u3002")]),m,s("p",null,[n("JavaScript \u8BED\u8A00\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u53EA\u652F\u6301\u5148\u884C\u65AD\u8A00(lookahead)\u548C\u5148\u884C\u5426\u5B9A\u65AD\u8A00(negative lookahead)\uFF0C\u4E0D\u652F\u6301\u540E\u884C\u65AD\u8A00(lookbehind)\u548C\u540E\u884C\u5426\u5B9A\u65AD\u8A00(negative lookbehind)\u3002ES2018 \u5F15\u5165"),s("a",g,[n("\u540E\u884C\u65AD\u8A00"),t(e)]),n("\uFF0CV8 \u5F15\u64CE 4.9 \u7248(Chrome 62)\u5DF2\u7ECF\u652F\u6301\u3002")]),v,s("p",null,[n("ES2018 "),s("a",x,[n("\u5F15\u5165"),t(e)]),n("\u4E86\u4E00\u79CD\u65B0\u7684\u7C7B\u7684\u5199\u6CD5 "),b,n(" \u548C "),h,n("\uFF0C\u5141\u8BB8\u6B63\u5219\u8868\u8FBE\u5F0F\u5339\u914D\u7B26\u5408 Unicode \u67D0\u79CD\u5C5E\u6027\u7684\u6240\u6709\u5B57\u7B26\u3002")]),q,s("p",null,[n("ES2018 \u5F15\u5165\u4E86"),s("a",f,[n("\u5177\u540D\u7EC4\u5339\u914D"),t(e)]),n("(Named Capture Groups)\uFF0C\u5141\u8BB8\u4E3A\u6BCF\u4E00\u4E2A\u7EC4\u5339\u914D\u6307\u5B9A\u4E00\u4E2A\u540D\u5B57\uFF0C\u65E2\u4FBF\u4E8E\u9605\u8BFB\u4EE3\u7801\uFF0C\u53C8\u4FBF\u4E8E\u5F15\u7528\u3002")]),y,s("p",null,[n("\u76EE\u524D\u6709\u4E00\u4E2A"),s("a",j,[n("\u63D0\u6848"),t(e)]),n("\uFF0C\u589E\u52A0\u4E86 "),E,n(" \u65B9\u6CD5\uFF0C\u53EF\u4EE5\u4E00\u6B21\u6027\u53D6\u51FA\u6240\u6709\u5339\u914D\u3002\u4E0D\u8FC7\uFF0C\u5B83\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u904D\u5386\u5668(Iterator)\uFF0C\u800C\u4E0D\u662F\u6570\u7EC4\u3002")]),_])}const T=p(i,[["render",w],["__file","regex.html.vue"]]);export{T as default};
